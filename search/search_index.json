{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Welcome to the QemuPlay wiki!</p> <p>Bienvenue sur QemuPlay, l'objet est d'aider \u00e0 utiliser Qemu pour lancer de vieux OS. Actuellement le projet est centr\u00e9 sur Windows 98 qui est le plus probl\u00e9matique de mon point de vue. La partie 2D est pleinement fonctionnelle, la partie 3D bien moins</p> <p></p> <p>Sommaire:  </p> <ul> <li>Qemu2D :  Fonctionne sous windows  </li> <li>Qemu3DFX : Fonctionne sous windows (opengl)  </li> <li>ArchW98 : Bas\u00e9 sur ArchLinux \u00e0 lancer sur cl\u00e9 usb, ssd externe (simplifi\u00e9 \u00e0 l'extr\u00eame)  </li> </ul> <p></p> <p>Remarque</p> <p>Je pr\u00e9cise que je n'encourage aucunement le piratage et surtout ce qu'on appelle le l33ch, mon but est la pr\u00e9servation des jeux... Il est normal de payer, cela finance la cr\u00e9ativit\u00e9 des d\u00e9veloppeurs, \u00e7a leur donne plus de moyens, de temps (je ne peux pas vivre de mon activit\u00e9 gratuite que \u00e7a soit sur le d\u00e9veloppement ou autres, donc je ne peux pas y consacrer plus de temps).</p> <p> </p>"},{"location":"#cahier-des-charges","title":"Cahier des charges","text":"<ul> <li>Mise en oeuvre simplifi\u00e9e pour les n\u00e9ophytes (scripts, images windows, ...)</li> <li>Light</li> <li>Aspect ratio pr\u00e9serv\u00e9 (l'image n'est pas \u00e9tir\u00e9e ni coup\u00e9e)</li> <li>Crt Shaders (en option)</li> <li>R\u00e9seau</li> <li>Contexte des jeux pr\u00e9serv\u00e9 au maximum</li> <li>Son*</li> </ul> <p>Son</p> <p>Bien que cel\u00e0 puisse paraitre \u00e9trange certaines solutions qui semblent int\u00e9ressantes sur le net ont un son coup\u00e9, hach\u00e9, c'est souvent masqu\u00e9 dans les vid\u00e9os disponibles sur le net. Le son fonctionne parfaitement sur ce que je propose.</p> <p> </p>"},{"location":"#samples","title":"Samples","text":"<p>Qemu2d, enregistrement direct </p> <p></p> <p>Qemu2d avec Shaderglass, prise de vue externe  </p> <p></p> <p>Qemu3DFX </p> <p></p> <p>ArchW98 </p> <p></p>"},{"location":"#auteur","title":"Auteur","text":"<ul> <li>Daerlnaxe aka Alexandre Codoul: initiateur, r\u00e9dacteur doc, vm, images, scripts, ...</li> </ul> <p>Personne d'autre pour le moment (h\u00e9las)</p> <p> </p>"},{"location":"#credits","title":"Cr\u00e9dits","text":"<p>Il va en manquer je vais rajouter au fur et \u00e0 mesure.</p> <ul> <li>Ma famille pour me supporter :D</li> <li>Les membres Win3x.org</li> <li>Les membres Abandonware</li> <li>JH Robotics pour son excellent travail sur les cartes vid\u00e9os.</li> </ul>"},{"location":"01-qemu2d/00-presentation/","title":"Pr\u00e9sentation","text":""},{"location":"01-qemu2d/00-presentation/#a-propos","title":"A Propos","text":"<p>Ce package a pour but de permettre de cr\u00e9er une machine virtuelle sous QEMU afin de jouer aux jeux en 2D demandant Windows98 ainsi que d'avoir des shaders au dessus pour am\u00e9liorer le rendu.</p> <p> </p>"},{"location":"01-qemu2d/00-presentation/#references","title":"R\u00e9f\u00e9rences","text":"<ul> <li>Prise interne Starcraft</li> <li>Prise interne Baldur's Gate</li> <li>Prise externe avec CRT Video Online</li> </ul>"},{"location":"01-qemu2d/00-presentation/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Windows x64.</li> <li>Une cl\u00e9 d'activation pour windows 98.</li> <li>Machines de test<ul> <li>intel 4770k 16Go ddr3</li> <li>Laptop I5 2.9Ghz</li> </ul> </li> <li>10Go d'espace disque sur l'h\u00f4te (Espace revu \u00e0 la hausse apr\u00e8s des remarques).</li> </ul>"},{"location":"01-qemu2d/00-presentation/#image-hdd-windows-98","title":"Image HDD windows 98","text":"<p>Derni\u00e8re version: v0.35</p> <p>Le disque syst\u00e8me est actuellement port\u00e9 de 3.2Go \u00e0 ~10Go</p> <p>Si vous d\u00e9sirez faire votre propre image je vous invite \u00e0 lire le fichier Win98 On QEMU.pdf, le plus important est d\u00e9taill\u00e9.</p> <p></p>"},{"location":"01-qemu2d/00-presentation/#logiciel-preinstalles","title":"Logiciel pr\u00e9install\u00e9s","text":"<p>Les versions install\u00e9s sont gratuites ou des sharewares sans cl\u00e9.</p> <ul> <li>Cpu-Z  </li> <li>Typesoft FTP server</li> <li>Firefox</li> <li>Daemon Tools</li> <li>Winrar</li> <li>CCleaner</li> <li>Process Explorer</li> </ul> <p> </p>"},{"location":"01-qemu2d/00-presentation/#memo","title":"Memo","text":"<p>Never Foget / Ne jamais oublier - FullScreen Qemu : Ctrl\uff0bAlt\uff0bG - Fullscreen ShaderGlass: Ctrl\uff0bShift\uff0bG - Qemu console : Ctrl\uff0bAlt\uff0b2 </p> <p></p> <p>Changez ces passwords \u00e0 la premi\u00e8re connexion</p> <p>Login/Passwords: - Compte principal Windows : <code>1234</code> - Typsoft FTP server:   - Login:<code>Admin</code>   - Password: <code>!1234*</code> </p> <p></p> <p></p>"},{"location":"01-qemu2d/01-demarrage/","title":"D\u00e9marrage","text":"<p>A supprimer</p>"},{"location":"01-qemu2d/01-demarrage/#presentation","title":"Pr\u00e9sentation","text":"<p>Danger</p> <p>Ne jamais lire une image HDD avec QEMU si vous \u00eates en train d'en faire une copie manuellement: gros risque de corruption.</p> <p>Danger</p> <p>En utilisant le mode r\u00e9seau vous serez sur internet avec un OS obsol\u00e8te, faites tr\u00e8s attention !</p> <p></p>"},{"location":"01-qemu2d/01-demarrage/#references","title":"R\u00e9f\u00e9rences","text":"<ul> <li>T\u00e9l\u00e9chargement du package</li> </ul>"},{"location":"01-qemu2d/01-demarrage/#contenu-du-package","title":"Contenu du package","text":"<p>Le package contient tout le n\u00e9cessaire mais vous pouvez aussi t\u00e9l\u00e9charger sur les sites: - Une image de disque dur pr\u00e9install\u00e9 Windows 98 : win98fr.raw &gt; plus depuis la version 0.3 - ShaderGlass pour am\u00e9liorer le rendu - QEMU Qui permet de cr\u00e9er une machine virtuelle (le premier tuto a \u00e9t\u00e9 fait avec la version 6.2) - Un fichier PowerShell permettant un lancement simplifi\u00e9 - Un fichier PDF pour en apprendre plus sur QEMU + des explications pour utiliser le DOS et faire des partitions.</p> <p> </p> <p>Depuis la version 0.3 l'image HDD Windows est \u00e0 part.</p> <p> </p> <p>J'ai ajout\u00e9 un serveur ftp pour faciliter les transferts, les identifiants sont: - User: <pre><code> Admin\n</code></pre> - Password <pre><code>epoYRfEw\n</code></pre></p> <p>Le mot de passe pour se connecter est \"1234\", pensez \u00e0 le changer.</p> <p></p>"},{"location":"01-qemu2d/01-demarrage/#quelques-mots","title":"Quelques mots...","text":"<p>Normalement j'ai effac\u00e9 mes traces ainsi que les anciens jeux, si vous constatez quelque chose merci de me pr\u00e9venir.</p> <p>Tout a \u00e9t\u00e9 v\u00e9rifi\u00e9 par VirusTotal et ma propre \u00e9dition de Kaspersky, je ne pourrais pas \u00eatre tenu pour responsable en cas de soucis.</p>"},{"location":"01-qemu2d/03-lancement_basique/","title":"Lancement Basique","text":"<p>Un script PowerShell est fourni pour faciliter l'utilisation</p> <p></p>"},{"location":"01-qemu2d/03-lancement_basique/#parametres-de-la-commande-qemu","title":"Param\u00e8tres de la commande QEMU","text":"<ul> <li><code>&lt;Image Disque Systeme&gt;</code>: Chemin vers <code>win98fr.raw</code></li> <li><code>&lt;Lettre&gt;</code> : Lettre du lecteur cd-rom (avec les deux points). Vous pouvez utiilser un lecteur virtuel comme Daemon Tools si vous le d\u00e9sirez.</li> </ul> <p>Exemples de lancement - Network d\u00e9sactiv\u00e9</p> <pre><code>.\\qemu-system-i386.exe -cpu pentium2 -m 256 -vga cirrus -drive format=raw,file=\"D:\\Temp\\Qemu-Package v0.2.0\\win98fr.raw\" -cdrom h: -device sb16 -nic none -usb -machine acpi=off -k fr-fr -no-reboot -display sdl \n</code></pre> <p></p>"},{"location":"01-qemu2d/04-tutoriel/","title":"Tutoriel","text":"<ul> <li>Introduction</li> <li>Pr\u00e9sentation</li> <li>Liens</li> <li>Lexique</li> <li>Installation</li> <li>Base</li> <li>R\u00e9seau (Optionnel)</li> <li>Lancement</li> <li>Lancement Automatis\u00e9</li> <li>Lancement Manuel</li> <li>Optimisation du rendu Graphique</li> <li>A Faire</li> <li>Aide</li> </ul>"},{"location":"01-qemu2d/04-tutoriel/#introduction","title":"Introduction","text":""},{"location":"01-qemu2d/04-tutoriel/#presentation","title":"Pr\u00e9sentation","text":"<p>Ce tutoriel a pour but de permettre une mise en place rapide.</p> <p>Pour avoir des explications plus pouss\u00e9es voir le fichier <code>Win98 On Qemu.pdf</code> disponibles dans les liens.</p> <p>Info</p> <p>Bien que ce tutoriel puisse vous para\u00eetre long, c'est en r\u00e9alit\u00e9 tr\u00e8s rapide et simple \u00e0 mettre en \u0153uvre, c'est tr\u00e8s d\u00e9taill\u00e9 pour aider les d\u00e9butants.</p> <p> </p>"},{"location":"01-qemu2d/04-tutoriel/#liens","title":"Liens","text":"<ul> <li>T\u00e9l\u00e9chargement pour installation <ul> <li>Image HDD:<ul> <li>FR : win98se-fr-v0.3</li> </ul> </li> <li>Qemu_Package-v0.3</li> </ul> </li> <li>ShaderGlass Releases : Optionnel, pour am\u00e9liorer le rendu via des shaders.</li> <li>Win98 On Qemu.pdf : Explications plus pouss\u00e9es mais \u00e9galement un m\u00e9mo DOS pour les partitions.</li> </ul>"},{"location":"01-qemu2d/04-tutoriel/#lexique","title":"Lexique","text":"<ul> <li>Host: Votre machine phyisque</li> <li>Guest: La machine virtuelle</li> </ul>"},{"location":"01-qemu2d/04-tutoriel/#installation","title":"Installation","text":""},{"location":"01-qemu2d/04-tutoriel/#base","title":"Base","text":"<ul> <li>D\u00e9compressez le package</li> <li>Installez QEMU</li> <li>Placer l'image disque syst\u00e8me win98fr.raw dans le dossier qui vous arrange. </li> </ul>"},{"location":"01-qemu2d/04-tutoriel/#reseau-optionnel","title":"R\u00e9seau (optionnel)","text":"<p>Note</p> <p>Je vous propose une connexion en mode bridge, vous pouvez acc\u00e9der au net comme \u00e0 toutes les machines du r\u00e9seau</p> <p></p> <p>Proc\u00e9dure:</p> <ul> <li>Suivre le tutoriel de cettepage indiquant la mise en place.</li> <li>Au niveau du guest, \u00e9ventuellement param\u00e9trer la Passerelle, mais vous pouvez laisser la configuration en automatique.</li> </ul> <p></p>"},{"location":"01-qemu2d/04-tutoriel/#lancement","title":"Lancement","text":"<p>Vous pouvez lancer en ligne de commande ou utiliser le nouveau script powershell</p> <p></p>"},{"location":"01-qemu2d/04-tutoriel/#lancement-automatise-de-qemu","title":"Lancement automatis\u00e9 de QEMU","text":"<p>C'est un d\u00e9but de script PowerShell, si le fichier de configuration json n'existe pas il sera cr\u00e9\u00e9.</p> <p>Fonctionnement:</p> <ul> <li>Choix:<ul> <li>Lancement sans r\u00e9seau</li> <li>Lancement avec r\u00e9seau</li> </ul> </li> <li>Vous \u00eates guid\u00e9 dans les \u00e9tapes.</li> <li>Lance Automatiquement ShaderGlass (si l'exe est dans le m\u00eame dossier)</li> </ul> <p></p> <p>Des \u00e9volutions apparaitront afin de permettre plus de choix.</p> <p></p> <p>Exemple de r\u00e9sultat avec le script: <pre><code>PS E:\\Temp\\Qemu_Perso&gt; .\\Qemu2D.ps1\nProgramme lanc\u00e9 depuis 'E:\\Temp\\Qemu_Perso'\nChoix de lancement:\n        1) Sans r\u00e9seau\n        2) R\u00e9seau mode bridge\nEntrez votre choix (x: sortie): 2\nLancement de: 'C:\\Program Files\\qemu\\qemu-system-x86_64.exe -cpu pentium2 -m 256 -vga cirrus -drive format=raw,file=\"E:\\Temp\\Qemu_Perso\\win98fr.raw\" -cdrom f: -device sb16 -netdev tap,id=netw0,ifname=OpenVPN_TAP,script=no,downscript=no -device rtl8139,netdev=netw0,mac=52:55:00:d1:55:01 -usb -machine acpi=off -k fr-fr -no-reboot -display sdl'\nLancement de ShaderGlass\nFin de script Qemu2D\n</code></pre> </p> <p>Warning</p> <p>Si un des chemins utilis\u00e9 n'existe pas, vous aurez une sortie s\u00e8che sans avertissement</p> <p> </p>"},{"location":"01-qemu2d/04-tutoriel/#lancement-manuel-de-qemu","title":"Lancement Manuel de QEMU","text":"<p>Proc\u00e9dure:</p> <ul> <li>Ouvrez une invite de commande ou powershell.<ul> <li>D\u00e9placez vous dans le r\u00e9pertoire d'installation de QEMU</li> <li>Lancez la commande (voir aide):<ul> <li>Avec prise en charge r\u00e9seau mode bridge <pre><code>.\\qemu-system-i386.exe -cpu pentium2 -m 256 -vga cirrus -drive format=raw,file=&lt;Image Disque Systeme&gt; -cdrom &lt;Lettre&gt; -device sb16 -netdev tap,id=netw0,ifname=OpenVPN_TAP,script=no,downscript=no -device rtl8139,netdev=netw0,mac=52:55:00:d1:55:01 -usb -no-acpi -k fr-fr -no-reboot -sdl    \n</code></pre></li> <li>Sans prise en charge r\u00e9seau <pre><code>.\\qemu-system-i386.exe -cpu pentium2 -m 256 -vga cirrus -drive format=raw,file=&lt;Image Disque Systeme&gt; -cdrom &lt;Lettre&gt; -device sb16 -nic none -usb -no-acpi -k fr-fr -no-reboot -sdl    \n</code></pre></li> </ul> </li> </ul> </li> <li>QEMU d\u00e9marre</li> </ul> <p> </p>"},{"location":"01-qemu2d/04-tutoriel/#optimisation-du-rendu","title":"Optimisation du rendu","text":"<p>Si vous d\u00e9sirez am\u00e9liorer le rendu, vous pouvez utiliser ShaderGlass.</p> <p></p> <p>Warning</p> <p>A chaque changement de r\u00e9solution, si vous \u00eates en mode Input:window il faudra refaire la manipulation.</p> <p></p> <p>Note</p> <p>Une version est mise \u00e0 disposition dans le package au cas o\u00f9, avec un fichier de configuration <code>Qemu2D_Default.sgp</code> </p> <p></p> <p>Manipulation</p> <ul> <li>D\u00e9compressez ShaderGlass o\u00f9 vous voulez par contre pensez \u00e0 faire un lien dans le menu et \u00e9ventuellement dans la barre des t\u00e2ches</li> <li>Maximisez la fen\u00eatre de QEMU</li> <li>Optimisation du rendu (optionnel)<ul> <li>Lancez \u00e0 pr\u00e9sent le logiciel ShaderGlass</li> <li>dans \"File\" -&gt; \"Load Profile\" chargez ce fichier</li> <li>Normalement via le fichier vous avez captur\u00e9 votre sortie d'affichage</li> <li>Mettez ShaderGlass en plein \u00e9cran avec CTRL+Shift+G</li> </ul> </li> </ul> <p></p>"},{"location":"01-qemu2d/04-tutoriel/#a-faire","title":"A Faire","text":"<p>D\u00e8s la connexion:</p> <ul> <li>Changez votre mot de passe r\u00e9seau</li> <li>Changez le mot de passe de typsoft ftp server</li> </ul>"},{"location":"01-qemu2d/98-changelog/","title":"Changelog","text":""},{"location":"01-qemu2d/98-changelog/#powershell-script","title":"PowerShell script","text":"<ul> <li>v0.4 Work In Progress  <ul> <li> Spice mode  </li> <li> Generating secret for Spice</li> <li> Collection of Virtual Machines</li> <li> Telnet int\u00e9gration &amp; port  <ul> <li>Local  </li> <li>Lan  </li> </ul> </li> <li> Spice int\u00e9gration + port + ip<ul> <li>Local</li> <li>Lan</li> <li>Secret</li> <li>Port</li> </ul> </li> <li> Function to Verify VM</li> <li> Deport verification system for the selected vm</li> <li> Modify VM</li> <li> Remote control mode for Spice mode.  </li> <li> Seeing SSH mode  </li> <li> Putty Path</li> <li> Remote Viewer Path</li> <li> Function for path</li> <li> Sound parameter</li> <li> Launching putty if telnet mode  </li> <li> Launching remote viewer if spice mode</li> <li> Function to rewrite call before to launch qemu</li> </ul> </li> <li>v0.3  <ul> <li>Video card choice added in configuration  </li> <li>Code splitted in functions and modifications about the   configuration checks  </li> </ul> </li> </ul>"},{"location":"01-qemu2d/98-changelog/#hdd-image","title":"HDD Image","text":"<ul> <li>v0.35  <ul> <li>System stabilization: improved stabilization, works fine with cirrus vga card, rtl8039, sb16 with SDL mode.  </li> <li>Some free programs added   </li> <li>Registry Backup</li> <li>HardDrive extended to 10G with a second partition.</li> </ul> </li> <li>v0.31  <ul> <li>System stabilization: a lot of bugs about drivers, seems ok with cirrus 5446 + e1000 or std with jh robotics 2d drivers</li> <li>FTP serveur modified for a free version: typsoft ftp server ()</li> </ul> </li> </ul>"},{"location":"01-qemu2d/98-changelog/#old_changements","title":"Old_Changements","text":"<ul> <li>v0.3.0: <ul> <li>Clean OS install</li> <li>Dissociation paquet/image</li> <li>Paquet d'installation</li> <li>Refonte du tutoriel pour \u00eatre plus accessible + ajout au package.</li> <li>Tests avec la version compil\u00e9e QEMU du 24/12/2023</li> <li><code>-sdl</code> devient <code>-display sdl</code></li> <li>ShaderGlass v0.9</li> <li>Script powershell pour lancement facilit\u00e9.</li> <li>Image HDD win98fr</li> <li>Modification du drivers pour la carte graphique cirrus</li> <li>Retour vers les drivers 1.12|1.31</li> <li>Le panneau pour r\u00e9gler l'affichage est de nouveau disponible.</li> <li>Erreur sur l'explorer n'arrive plus</li> <li>Bug connu, les symboles r\u00e9duire, agrandir, fermer, question, sont indisponibles<ul> <li>Clic droit sur le bureau \u2192 Propri\u00e9t\u00e9s</li> <li>Onglet apparence</li> <li>Choisir une apparence, ou une police.</li> </ul> </li> </ul> </li> <li>v0.2.0: Version fr, lanceur i386</li> <li>v0.1.0: Version us, lanceur x86_64</li> </ul>"},{"location":"03-archw98/01-presentation/","title":"ArchW98","text":"<p>Construction de cette section ...</p> <p></p> <p>ArchW98  est un projet en cours de d\u00e9veloppement...</p> <p>Cel\u00e0 consiste en une cl\u00e9 usb \u00e0 plugger sur n'importe quelle machine sans intervention sp\u00e9cifique de l'utiisateur afin de lancer Windows98.</p> <p>Projet fonctionnel, visible sur Youtube</p> <p></p> <p>Information</p> <p>Le d\u00e9veloppement a \u00e9t\u00e9 mis en standby le temps de migrer certaines machines, plancher sur des certifs, et je voulias programmer moi m\u00eame un client j'avoue mais les librairies sont actuellement mal document\u00e9es pour faire ce que je veux faire. En reprenant le projet Qemu2D et peut \u00eatre Qemu3DFX cela me permet de voir ce que je peux unifier, porter, etc ...</p> <p>L'absence d'une documentation solide sur le travail que j'avais fait a \u00e9t\u00e9 p\u00e9nalisant, autant j'avais bien fait les choses pour qui voudrait passer derri\u00e8re autant j'avais mal fait pour capitaliser sur mes essais. En passant par Github je souhaite mettre \u00e0 disposition ce que j'ia appris mais aussi avoir des r\u00e9f\u00e9rences pour reprendre plus tard comme tout vrai projet.</p>"},{"location":"03-archw98/suivi/","title":"Suivi","text":""},{"location":"03-archw98/suivi/#drivers-jhrobotics","title":"Drivers JHRobotics","text":"<p>Les tests sans KVM ne sont pas positifs.</p> <p>Les tests ont d'abord \u00e9t\u00e9 r\u00e9alis\u00e9s sur la version 0.4 puis sur la version 0.5.</p> <p>Protocole - Test cin\u00e9matique - Test Jeu - Test son</p> <p>Mode DirectX7 =&gt; 2D: - KVM :   - Starcraft : parfait en HAL   - Fallout : parfait   - C&amp;C 95 : !!! PROBLEME !!!   - Commandos : parfait - No KVM :    - Starcraft : echec   - Fallout : Lenteur extr\u00eame</p> <p>Mode 3D: - KVM   - Starcraft : Erreur VMHAL9x.dll, mettre system dans la base de registre.   - Fallout : Echec - No KVM   - Starcraft : Echec   - Fallout : Echec</p> <p>Pour faire plus g\u00e9n\u00e9rique: - Starcraft: Hal : Parfait - Diablo : Hal : Parfait - Commandos : Wine: Parfait - Fallout : Hal : Parfait - &gt; C&amp;C95 : HAL : Probleme unrecognised direct draw result code, wine autre bug - Starcraft : HAL : Parfait - Dungeon Keeper : HAL : Parfait - Total Annihilation : HAL : Parfait - Myst : Wine ? : parfait - &gt; Half-Life : HAL ok, Direct3d =&gt; stries blanches</p>"},{"location":"80-aide/ArchLinux/","title":"ArchLinux","text":"<p>ArchLinux sert de base \u00e0 ArchW98</p>"},{"location":"80-aide/ArchLinux/#debug","title":"Debug","text":""},{"location":"80-aide/ArchLinux/#firmware-uniquement-au-chargement-de-grub","title":"Firmware uniquement au chargement de Grub:","text":"<p>V\u00e9rifier si les entr\u00e9es ont \u00e9t\u00e9 configur\u00e9es correctement au d\u00e9marrage de Grub: <pre><code>cat /boot/grub/grub.cfg | grep menuentry\n</code></pre></p> <p></p> <p>S'il n'y a que le firmware il faudra rajouter le noyau compress\u00e9 linux et reconfigur\u00e9 Grub:</p> <p></p> <p>Pour rajouter le noyau compress\u00e9 si totalement absent du support: <pre><code>pacman -s mkinitcpio \n</code></pre></p>"},{"location":"80-aide/mkdocs/","title":"MKdocs","text":""},{"location":"80-aide/mkdocs/#installation","title":"Installation","text":""},{"location":"80-aide/mkdocs/#github","title":"Github","text":"<p>Une fois d\u00e9ploy\u00e9 il faut penser \u00e0: - Aller dans settings - Aller sur pages - Choisir le fork utilis\u00e9 pour pusher les fichiers</p> <p></p>"},{"location":"80-aide/mkdocs/#configuration","title":"Configuration","text":""},{"location":"80-aide/mkdocs/#navigation","title":"Navigation","text":"<p>Les rubriques sont entre simple quote et les liens relatifs</p> <pre><code>nav:\n  - Home: index.md\n  - Aide :\n      - 'MkDocs' : aide/mkdocs.md\n      - 'Qemu' :\n        - 'Param\u00e8tres': ./aide/parametres.md\n</code></pre> <p></p>"},{"location":"80-aide/mkdocs/#bases","title":"Bases","text":""},{"location":"80-aide/mkdocs/#listes","title":"Listes","text":"<p>Pour cr\u00e9er une liste, il faut s\u00e9parer le contenu de la liste du titre qui l'annonce.</p> <p>Pour le moment je n'ai pas r\u00e9ussi \u00e0 int\u00e9grer dans une balise details.</p> Exemple:  Exemple de code:   <pre><code>Ma liste:  \n- element 1  \n- element 2\n</code></pre>   Rendu:    Ma liste:   <ul> <li>element 1</li> <li>element 2</li> </ul> <p> </p>"},{"location":"80-aide/mkdocs/#avance","title":"Avanc\u00e9","text":""},{"location":"80-aide/mkdocs/#alerter-admonition","title":"Alerter (admonition)","text":"<p>Types:  </p> <ul> <li>note  </li> <li>abstract</li> <li>info  </li> <li>tip  </li> <li>success  </li> <li>question  </li> <li>warning  </li> <li>failure  </li> <li>danger  </li> <li>bug  </li> <li>example  </li> <li>quote  </li> </ul> <p></p>"},{"location":"80-aide/mkdocs/#une-ligne","title":"Une ligne","text":"<p>Le contenu est obligatoirement entre <code>\"\"</code></p> <pre><code>!!! note \"une note\"\n</code></pre> <p>une note</p> <p></p>"},{"location":"80-aide/mkdocs/#blocks","title":"Blocks","text":"<pre><code>!!! note\n\n    Le texte de ma note sur plusieurs lignes\n</code></pre> <p>avec un titre</p> <p>Le texte de ma note sur plusieurs lignes</p> <pre><code>!!! note \"avec un titre\"\n\n    Le texte de ma note sur plusieurs lignes\n</code></pre> <p>Note</p> <p>Le texte de ma note sur plusieurs lignes</p> <p>Version expandable (avec le + ouvert par d\u00e9faut) <pre><code>???+ note\n</code></pre></p> Note <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p> </p>"},{"location":"80-aide/mkdocs/#exemples","title":"Exemples","text":"<p>Example</p> <p>Note</p> <p>Abstract</p> <p>Info</p> <p>Tip</p> <p>Success</p> <p>Question</p> <p>Warning</p> <p>Failure</p> <p>Danger</p> <p>Bug</p> <p></p> <p>Quote</p>"},{"location":"80-aide/sommaire/","title":"Aide","text":"<ul> <li>Qemu : de l'aide sur qemu, param\u00e8tres et console.</li> <li>Shaderglass: un excellent programme pour am\u00e9liorer les graphismes.</li> <li>Windows 98 : Des tips et du d\u00e9bug au fur et \u00e0 mesure des probl\u00e8mes rencontr\u00e9s.</li> <li>Mkdocs: Il convertit tout mon markdown, j'en ai profit\u00e9 pour donner quelques astuces apr\u00e8s avoir rencontr\u00e9 des probl\u00e8mes </li> </ul>"},{"location":"80-aide/qemu/hardware/","title":"Hardware","text":""},{"location":"80-aide/qemu/hardware/#_1","title":"Hardware","text":"<p>https://qemu-project.gitlab.io/qemu/about/removed-features.html</p>"},{"location":"80-aide/qemu/hardware/#systeme","title":"Syst\u00e8me","text":"<ul> <li>pentium2  <ul> <li>cpu pentium2</li> <li>carte m\u00e8re i440fx </li> </ul> </li> </ul>"},{"location":"80-aide/qemu/hardware/#cartes-videos","title":"Cartes videos:","text":"<ul> <li>none   : rien  </li> <li>std    : standard VGA (default) - can work with JHRobotics SoftGpu </li> <li>Windows Host : Tested with SoftGpu, little problem on display settings but work by trying several times.  </li> <li>cirrus : Cirrus VGA (5446, a classic):  </li> <li>Windows Host : Drivers 1.41 : bug display settings  </li> <li>vmware : VMWare SVGA\"  </li> <li>qxl    : QXL VGA\"  </li> <li>virtio : Virtio VGA\"  </li> </ul> <p>(- device <code>ati-vga</code> 2 ati rage pro)</p> <p></p> <p>les cartes cirrus semblent poser probl\u00e8mes \u00e0 mesure que les versions de QEMU montent</p> <p></p>"},{"location":"80-aide/qemu/hardware/#cartes-son","title":"Cartes son:","text":"<ul> <li>sb16   : Creative Sound Blaster 16, bus isa (peut poser probl\u00e8me*)  </li> <li>AC97 : Intel 82801AA AC97 Audio, bus PCI, alias \"ac97\" (1999)  </li> <li>ES1370 : ENSONIQ AudioPCI ES1370, bus PCI (1997)  </li> </ul> <p>mettre -audio none pour ne rien avoir </p> <p>Warning</p> <p>recent versions of QEMU (&gt;= 4.0) have a broken support for this sound card. See bug: [2]. Briefly, when QEMU's GTK UI is used and audio is playing, you'll experience the QEMU window freezing. In addition, there will be flickering in the audio as well. (wiki.osdev.org)[https://wiki.osdev.org/Sound_Blaster_16]</p> <p> </p> <p>Note</p> <p>Test sans la carte r\u00e9seau distante</p> <p> </p> <p>draft name \"adlib\", bus ISA, desc \"Yamaha YM3812 (OPL2)\" name \"cs4231a\", bus ISA, desc \"Crystal Semiconductor CS4231A\" name \"gus\", bus ISA, desc \"Gravis Ultrasound GF1\" name \"hda-duplex\", bus HDA, desc \"HDA Audio Codec, duplex   (line-out, line-in)\" name \"hda-micro\", bus HDA, desc \"HDA Audio Codec, duplex (speaker, microphone)\" name \"hda-output\", bus HDA, desc \"HDA Audio Codec, output-only   (line-out)\" name \"ich9-intel-hda\", bus PCI, desc \"Intel HD Audio Controller (ich9)\" name \"intel-hda\", bus PCI, desc \"Intel HD Audio Controller (ich6)\"  </p> <p>name \"usb-audio\", bus usb-bus name \"virtio-sound-device\", bus virtio-bus name \"virtio-sound-pci\", bus PCI, alias \"virtio-sound\", desc   \"Virtio Sound\"  </p> <p></p>"},{"location":"80-aide/qemu/hardware/#cartes-reseaux","title":"Cartes r\u00e9seaux","text":"<ul> <li>e1000  : 10/100/1000Mb (pci) </li> <li>RTL8139 : 100 mbps (1997)</li> </ul>"},{"location":"80-aide/qemu/images/","title":"Images","text":""},{"location":"80-aide/qemu/images/#procons","title":"Pro/Cons","text":""},{"location":"80-aide/qemu/images/#raw","title":"Raw","text":"<ul> <li>Avantages:  <ul> <li>Rapide</li> <li>Solide</li> </ul> </li> <li>Inconvenients:  <ul> <li>Snapshots impossibles  (a v\u00e9rifier)</li> <li>Consomme l'espace</li> </ul> </li> </ul>"},{"location":"80-aide/qemu/images/#qcow2","title":"QCow2","text":"<ul> <li>Avantages:  <ul> <li>Snapshots </li> <li>Ne consomme pas l'espace inutilis\u00e9</li> </ul> </li> <li>Inconvenients:  <ul> <li>Fragile</li> <li>Lent compar\u00e9 \u00e0 Raw</li> </ul> </li> </ul>"},{"location":"80-aide/qemu/images/#introduction","title":"Introduction","text":"<p>Pour les d\u00e9butants, les commandes sont \u00e0 taper via powershell, cmd, ou m\u00eame cli Linux. Sous windows il faudra aller dans le dossier o\u00f9 se trouve les \u00e9x\u00e9cutables (<code>cd &lt;dossier&gt;</code>)</p>"},{"location":"80-aide/qemu/images/#creation","title":"Cr\u00e9ation","text":""},{"location":"80-aide/qemu/images/#images-raw","title":"Images Raw","text":"<p>Cr\u00e9er une image (pour faire un disque dur, taille 10Giga ici): <pre><code>qemu-img create -f raw &lt;Nom&gt; 10G\n</code></pre></p> <p> </p>"},{"location":"80-aide/qemu/images/#edition","title":"Edition","text":""},{"location":"80-aide/qemu/images/#image-raw","title":"Image Raw","text":""},{"location":"80-aide/qemu/images/#etendre-une-image","title":"Etendre une image","text":""},{"location":"80-aide/qemu/images/#image-raw_1","title":"Image Raw","text":"<pre><code>qemu-img resize &lt;lien vers l'image&gt; +&lt;taille d\u00e9sir\u00e9e&gt;\n</code></pre> <p>Exemple: <pre><code>qemu-img resize \"E:\\VM\\Qemu\\Qemu_Perso\\win98fr.raw\" +7G\n</code></pre></p>"},{"location":"80-aide/qemu/linux/","title":"Linux","text":"<p>Monter une image  <pre><code>mount -o loop,offset=32256 /path/to/image.img /mnt/mountpoint\n</code></pre></p> <p>Pour ajouter la possibilit\u00e9 d'\u00e9crire <pre><code>mount -o rw,loop,offset=32256 /path/to/image.img /mnt/mountpoint\n</code></pre></p>"},{"location":"80-aide/qemu/moniteur/","title":"Pr\u00e9sentation","text":"<p>Le moniteur permet d'envoyer des commandes \u00e0 QEMU, que cela soit pour:</p> <ul> <li>Changer de disque</li> <li>Collecter des informations</li> <li>Mettre en pause le guest.</li> <li>...</li> </ul> <p></p>"},{"location":"80-aide/qemu/moniteur/#lancement-du-moniteur","title":"Lancement du moniteur","text":""},{"location":"80-aide/qemu/moniteur/#lancement-du-moniteur-en-mode-sdl","title":"Lancement du moniteur en mode SDL","text":"<p>Windows</p> <p>Le moniteur peut \u00eatre lanc\u00e9 en pressant les touches [Ctrl]+[Alt]+[2] </p> <p></p>"},{"location":"80-aide/qemu/moniteur/#aide","title":"Aide","text":"<p>Dans la console taper <code>help</code></p> <p>Pour obtenir de l'aide sur une commande pr\u00e9cise taper <code>help &lt;commande&gt;</code></p> <p></p>"},{"location":"80-aide/qemu/moniteur/#liste-des-commandes","title":"Liste des commandes","text":"<p>Non exhaustif</p> <ul> <li>change: permet de modifier un m\u00e9dia amovible (\u00e0 tester: changer les options d'affichage d'un VNC, et changer le mot de passe utilis\u00e9 sur un VNC)</li> </ul> <p></p>"},{"location":"80-aide/qemu/moniteur/#medias-amovibles","title":"Medias amovibles","text":""},{"location":"80-aide/qemu/moniteur/#changement-du-cd-rom","title":"Changement du CD-Rom","text":"<p>Proc\u00e9dure:</p> <ul> <li>Identification des m\u00e9dias disponibles, taper <code>info block</code> </li> <li>Pour changer le CD-Rom d\u00e9sign\u00e9 par <code>ide1-cd0</code>:  <ul> <li>Taper  <pre><code>change ide1-cd0 &lt;lien vers l'image|lecteur&gt;\n</code></pre></li> </ul> </li> </ul> <p></p> <p>Exemple de r\u00e9sultat:</p> <ul> <li>Partie console </li> <li>Changement automatique dans Windows 98 </li> </ul> <p></p> <p>Comme d\u00e9j\u00e0 indiqu\u00e9, QEMU fonctionne avec un lecteur physique, un lecteur virtuel ou directement avec certaines images. Dans mon cas je n'ai plus de lecteur physique comme beaucoup d'entre nous sur cette machine.</p>"},{"location":"80-aide/qemu/network/","title":"R\u00e9seau","text":"<ul> <li>Conseils </li> <li>Interface TAP OpenVPN </li> <li>Partage de connexion </li> <li>Mode Bridge </li> <li>Debug </li> <li>Cas: 'Could not Open...' </li> </ul>"},{"location":"80-aide/qemu/network/#modes-reseaux","title":"Modes R\u00e9seaux","text":"<p>Diff\u00e9rents modes:  </p> <ul> <li>Par d\u00e9faut :  <ul> <li>Connexion au net possible  </li> <li>Impossible de dialoguer avec l'h\u00f4te.  </li> </ul> </li> <li>Partage de connexion:  <ul> <li>Connexion au net possible  </li> <li>Cr\u00e9ation d'un subnet o\u00f9 l'interface TAP est routeur  <ul> <li>Dialogue h\u00f4te&lt;&gt;guest possible  </li> <li>Dialogue avec les machines du r\u00e9seau impossible  </li> </ul> </li> </ul> </li> <li>Mode Bridge <ul> <li>connexion au net possible  </li> <li>Machine consid\u00e9r\u00e9e comme appartenant au r\u00e9seau de l'h\u00f4te  </li> <li>Dialogue h\u00f4te&lt;&gt;guest possible  </li> <li>Dialogue machines&lt;&gt;guest possible  </li> <li>Dialogue machines&lt;&gt;host possible  </li> </ul> </li> </ul> <p></p> <p>Note</p> <p>Si vous avez l'intention d'avoir plusieurs machines sous le m\u00eame r\u00e9seau, pensez \u00e0 changer l'adresse MAC dans la ligne de commande.</p> <p></p>"},{"location":"80-aide/qemu/network/#interface-tap-openvpn","title":"Interface TAP OpenVPN","text":"<p>T\u00e9l\u00e9chargez OpenVPN</p> <ul> <li>Lancez l'installation d'OpenVPN, mais n'installez que le TAP. </li> <li>Acc\u00e9der aux Connexions R\u00e9seaux:  <ul> <li>Windows 10 :  <ul> <li>Pressez les touches Win\uff0bR </li> <li>Taper  <pre><code>ncpa.cpl\n</code></pre></li> </ul> </li> <li>Lancer   </li> <li>Windows 11 : Panneau de configuration \u2192 R\u00e9seau et Internet \u2192 Centre R\u00e9seau et partage \u2192 Modifier param\u00e8tres de la carte  </li> </ul> </li> <li>Renommez votre connexion (j'ai pris OpenVPN_TAP)  </li> </ul> <p></p> <p>Le nom de la connexion sera utilis\u00e9 dans la ligne de commande pour <code>ifname</code> !</p> <p></p>"},{"location":"80-aide/qemu/network/#partage-de-connexion","title":"Partage de connexion","text":"<p>N\u00e9cessite l'installation d'une interface TAP</p> <p></p> <p>Configuration carte r\u00e9seau physique H\u00f4te:</p> <ul> <li>Aller sur la connexion de la carte physique  </li> <li>Clic droit \u2190 Propri\u00e9t\u00e9s  </li> <li>Aller sur l'onglet <code>Partage</code> </li> <li>Configurer ainsi, en permettant le partage pour la connexion \"TAP\" </li> </ul> <p></p> <p>Une fois en place on voit que l'on a deux r\u00e9seaux diff\u00e9rents Host </p> <p>Guest </p> <p></p>"},{"location":"80-aide/qemu/network/#mode-bridge","title":"Mode Bridge","text":"<p>N\u00e9cessite l'installation d'une interface TAP</p> <p></p> <p>Caract\u00e9ristiques du mode Bridge:  </p> <ul> <li>Passerelle identique pour tout le monde  </li> <li>Serveur DHCP du r\u00e9seau peuvent d\u00e9finir l'IP  </li> <li>L'h\u00f4te \u00e0 une adresse IP  </li> <li>La machine guest \u00e0 sa propre IP  </li> </ul> <p></p> <p>Configuration pour le mode Bridge:  </p> <ul> <li>S\u00e9lectionnez votre carte r\u00e9seau ainsi que le TAP, faites un clic droit et utilisez \"Ajouter un pont\"   </li> <li>Editez les propri\u00e9t\u00e9s du pont pour configurer l'IPv4 en Statique (Important)  </li> </ul> <p></p> <p>Note</p> <p>Normalement tout est op\u00e9rationnel</p> <p>Si QEMU bloque: \"tap: Could not open 'OpenVPN_TAP'\"</p> <p></p>"},{"location":"80-aide/qemu/network/#debug","title":"Debug","text":""},{"location":"80-aide/qemu/network/#cas-tap-could-not-open-openvpn_tap","title":"Cas \"tap: Could not open 'OpenVPN_TAP'\"","text":""},{"location":"80-aide/qemu/parametres/","title":"Param\u00e8tres","text":""},{"location":"80-aide/qemu/parametres/#note-sur-la-syntaxe","title":"Note sur la syntaxe","text":"<ul> <li><code>&lt;lien&gt;</code> : Les chevrons ne sont pas \u00e0 mettre, ils indiquent que vous devez compl\u00e9ter en adaptant \u00e0 votre situaiton.</li> </ul> <p>exemple: - Utiliser une iso pour votre cdrom <pre><code>-cdrom \"&lt;lien&gt;\"\n</code></pre> - Vous compl\u00e9terez par votre chemin, ici pour moi: <pre><code>-cdrom \"e:\\isos\\windows 98.iso\"`\n</code></pre></p> <p> </p>"},{"location":"80-aide/qemu/parametres/#supports","title":"Supports","text":"<p>Quelques exemples pour correctement entrer les liens vers les supports.</p> <p>Exemples:  </p> <ul> <li>Windows: <code>-cdrom r:</code></li> <li>Windows: <code>-cdrom \"e:\\isos\\windows 98.iso\"</code></li> <li>Ubuntu: <code>-cdrom /dev/sr0</code></li> </ul> <p></p>"},{"location":"80-aide/qemu/parametres/#cd-rom","title":"CD-Rom","text":"<p>Utiliser <code>-cdrom \"&lt;lien&gt;\"</code></p> <p>!!! note Ils peuvent \u00eatre un lecteur physique ou virtuel, une iso...</p> <p></p>"},{"location":"80-aide/qemu/parametres/#disquette","title":"Disquette","text":"<p>utiliser <code>-fda &lt;lien&gt;</code></p> <p></p>"},{"location":"80-aide/qemu/parametres/#carte-reseau","title":"Carte r\u00e9seau","text":"<p>name: permet de d\u00e9finir un nom qui pourra \u00eatre utilis\u00e9e avec le moniteur (entre autres)</p> <p></p>"},{"location":"80-aide/qemu/parametres/#boot","title":"Boot","text":"<p>Introduit par <code>-boot</code></p> <ul> <li>menu: affiche un menu de s\u00e9lection <pre><code>-boot menu=on\n</code></pre></li> <li>order</li> <li>nc : aucun ordre (utile pour ralentir si n\u00e9cessaire)</li> </ul> <p></p>"},{"location":"80-aide/qemu/parametres/#affichage-deporte","title":"Affichage d\u00e9port\u00e9","text":""},{"location":"80-aide/qemu/parametres/#vnc","title":"VNC","text":"<p>Warning</p> <p>Pour le moment je n'ai pas r\u00e9ussi sous windows host \u00e0 faire transiter le son entre deux PC. Sous linux il  est probable qu'il faille utiliser pulseaudio.</p> <p></p> <p>Syntaxe: <pre><code>-vnc :&lt;port&gt;\n</code></pre></p> <p>Clients: - Real VNC Viewer - ...</p> <p></p>"},{"location":"80-aide/qemu/parametres/#probleme-de-decalage-pointeur-hostguest","title":"Probl\u00e8me de d\u00e9calage pointeur host/guest","text":"<p>Utiliser l'option ci-dessous qui est totalement compatible windows98 <pre><code>-usbdevice tablet \n</code></pre></p> <p></p> <p></p>"},{"location":"80-aide/qemu/parametres/#spice","title":"Spice","text":"<p>Le son transite parfaitement entre deux machines distantes</p> <p>Mettre le son sur spice</p> <p></p> <p>Syntaxe: <pre><code>-spice port=&lt;port&gt;[,options]\n</code></pre></p> <p></p> <p>Options:  </p> <ul> <li>Pas de password: <code>disable-ticketing=on</code></li> <li>Port: <code>port=&lt;port&gt;</code></li> <li>IP d'\u00e9coute : <code>addr=&lt;addr&gt;</code></li> <li>Forcer une version sp\u00e9cifique d'IP:<ul> <li><code>ipv4=on|off</code></li> <li><code>ipv6=on|off</code></li> <li><code>unix=on|off</code></li> </ul> </li> <li>Secret: password-secret= <li> <p>sasl=on|off</p> </li> <li> <p>: d\u00e9finit l'ID d'un objet \"secret\" contenant le password \u00e0 utiliser.</p> </li> <p>Secondaire: disable-copy-paste=on|off Disable copy paste between the client and the guest.</p> <p>disable-agent-file-xfer=on|off Disable spice-vdagent based file-xfer between the client and the guest.</p> <p>tls-port= Set the TCP port spice is listening on for encrypted channels. <p>x509-dir= Set the x509 file directory. Expects same filenames as -vnc \\(display,x509=\\)dir <p>x509-key-file=; x509-key-password=; x509-cert-file=; x509-cacert-file=; x509-dh-key-file= The x509 file names can also be configured individually. <p>tls-ciphers= Specify which ciphers to use. <p>tls-channel=[main|display|cursor|inputs|record|playback]; plaintext-channel=[main|display|cursor|inputs|record|playback] Force specific channel to be used with or without TLS encryption. The options can be specified multiple times to configure multiple channels. The special name \u201cdefault\u201d can be used to set the default mode. For channels which are not explicitly forced into one mode the spice client is allowed to pick tls/plaintext as he pleases.</p>"},{"location":"80-aide/qemu/parametres/#compression","title":"Compression","text":"<p>image-compression=[auto_glz|auto_lz|quic|glz|lz|off] Configure image compression (lossless). Default is auto_glz.</p> <p>jpeg-wan-compression=[auto|never|always]; zlib-glz-wan-compression=[auto|never|always] Configure wan image compression (lossy for slow links). Default is auto.</p> <p>streaming-video=[off|all|filter] Configure video stream detection. Default is off.</p>"},{"location":"80-aide/qemu/parametres/#sasl","title":"SASL","text":"<p>Require that the client use SASL to authenticate with the spice. The exact choice of authentication method used is controlled from the system / user\u2019s SASL configuration file for the \u2018qemu\u2019 service. This is typically found in /etc/sasl2/qemu.conf. If running QEMU as an unprivileged user, an environment variable SASL_CONF_PATH can be used to make it search alternate locations for the service config. While some SASL auth methods can also provide data encryption (eg GSSAPI), it is recommended that SASL always be combined with the \u2018tls\u2019 and \u2018x509\u2019 settings to enable use of SSL and server certificates. This ensures a data encryption preventing compromise of authentication credentials.</p> <p>agent-mouse=[on|off] Enable/disable passing mouse events via vdagent. Default is on.</p> <p>playback-compression=[on|off] Enable/disable audio stream compression (using celt 0.5.1). Default is on.</p> <p>seamless-migration=[on|off] Enable/disable spice seamless migration. Default is off.</p> <p>gl=[on|off] Enable/disable OpenGL context. Default is off.</p> <p>rendernode= DRM render node for OpenGL rendering. If not specified, it will pick the first available. (Since 2.9) <p></p> <p>Clients : - Virt-Viewer (Lancer sous Windows comme Remote Viewer)</p> <p> </p>"},{"location":"80-aide/qemu/parametres/#moniteur","title":"Moniteur","text":""},{"location":"80-aide/qemu/parametres/#controle-a-distance-avec-telnet","title":"Controle \u00e0 distance avec Telnet","text":"<p>Permet d'utiliser la console pour piloter Qemu \u00e0 distance.</p> <p></p> <p>Clients: - Putty</p>"},{"location":"80-aide/qemu/presentation/","title":"Presentation","text":"<p>Pour vous repr\u00e9rer dans l'aide de QEMU, quelques bases pour les d\u00e9butants:  </p> <ul> <li>Moniteur : Il permet d'envoyer des commandes \u00e0 la machine virtuelle, les premiers pas seront souvent pour changer des p\u00e9riph\u00e9riques amovibles mais le moniteur a des commandes tr\u00e8s puissantes.  </li> <li>Param\u00e8tres : Les param\u00e8tres sont \u00e0 entrer en lan\u00e7ant QEMU, qui est extr\u00eamement customisable; un script powershell est mis \u00e0 disposition pour simplifier la prise en main.</li> <li>Guest: Le terme guest d\u00e9signe la machine virtuelle que l'on a cr\u00e9\u00e9.</li> <li>Host: Le terme host d\u00e9signe l'h\u00f4te, votre pc par exemple, sur lequel on va lancer QEMU.</li> <li>Hyperviseur: ce sont des fonctions int\u00e9gr\u00e9es \u00e0 un CPU physique qui permettent \u00e0 la machine virtuelle (VM) de dialoguer avec le CPU de l'host (version simpliste).</li> </ul> <p> </p>"},{"location":"80-aide/qemu/presentation/#prise-en-main-de-la-machine-virtuelle","title":"Prise en main de la machine virtuelle","text":"<p>Si QEMU h\u00e9berge le guest, la visualisation de ce qu'il se passe sur le guest n'est pas obligatoirement \u00e0 afficher sur l'host. Les r\u00e9sultats sont m\u00eame tr\u00e8s int\u00e9ressants via le protocole SPICE.</p> <p>Je vous encourage vivemment \u00e0 vous tourner le plus t\u00f4t possible vers un fonctionnement de ce type, m\u00eame pour faire tourner sur la m\u00eame machine.</p> <p> </p>"},{"location":"80-aide/qemu/presentation/#prise-en-main-du-moniteur","title":"Prise en main du moniteur","text":"<p>Le moniteur est accessible de plusieurs mani\u00e8res dont \u00e0 distance lui aussi, via telnet.</p> <p>Telnet est un protocole peu s\u00e9curis\u00e9, pensez \u00e0 utiliser un firewall efficace !</p>"},{"location":"80-aide/shaderglass/","title":"ShaderGlass","text":""},{"location":"80-aide/shaderglass/#reglage-pour-qemu2d","title":"R\u00e9glage pour Qemu2D","text":"<ul> <li>Input  </li> <li>PixeSize : x1  </li> <li>Output  </li> <li>Mode: Glass  </li> <li>Windows : Click-Trough  </li> <li>FrameSkip: None  </li> <li>Shader  </li> <li>Choose...  <ul> <li>Choisir un shader  </li> </ul> </li> </ul>"},{"location":"80-aide/shaderglass/#avis-sur-les-shaders","title":"Avis sur les shaders","text":"<ul> <li>crt-hylian-curvature (g\u00e9om\u00e9trie, rend bien pour les jeux)  </li> <li>crt-easymode-halation (plus discret, global)  </li> <li>crt-interlaced-halation (g\u00e9om\u00e9trie, fin, global)  </li> </ul>"},{"location":"80-aide/windows_98/affichage/","title":"Affichage","text":""},{"location":"80-aide/windows_98/affichage/#debug","title":"Debug","text":"<p>apparemment en utilisant la commande suivante on peut contourner  l'erreur dll du <code>display settings</code>: <pre><code>RUNDLL DESKCP16.DLL,QUICKRES_RUNDLLENTRY &lt;hres&gt;x&lt;vres&gt;x&lt;bpp&gt;\n</code></pre></p> <p></p> <p>Explications:</p> <ul> <li>bpp : in byte, <sub>~4,</sub>~8,16,24,32  ~</li> </ul> <p>Tried:</p> <ul> <li>640x480</li> <li>800x600</li> <li>1024x768</li> <li>1280x960</li> </ul> <p>!!! Success Test\u00e9 avec succ\u00e8s avec le driver 2d de JH Robotics.</p> <p></p> <p>On peut r\u00e9afficher l'icone dans le systray, \u00e0 partir de l\u00e0 en cliquant sur l'icone on contourne l'erreur, on peut relancer le panneau sans probl\u00e8me.</p> <p>Rappel</p> <p>J'avais fait avant un msconfig en r\u00e9diusant le vga a 640x480 sans succ\u00e8s. J'ai \u00e9galement enlev\u00e9 tout le matos en double via le mode sans \u00e9chec.</p>"},{"location":"90-developpement/01-script_powershell/","title":"Script Powershell","text":"<p>[Toc]</p>"},{"location":"90-developpement/01-script_powershell/#todo","title":"TODO","text":"<ul> <li> Include parameter for ShaderGlass in JSon  </li> <li> Functions  </li> <li> Adding VGA Card choice </li> <li> deported display</li> </ul>"},{"location":"90-developpement/01-script_powershell/#etude","title":"Etude","text":""},{"location":"90-developpement/01-script_powershell/#get-install-path-of-qemu-on-windows","title":"Get install path of Qemu on Windows","text":"<pre><code>Get-ChildItem -Path $env:ProgramFiles -Recurse -Filter '*.exe' -ErrorAction SilentlyContinue | Where-Object {$_.FullName -like '*qemu*'} | Select-Object FullName\n</code></pre> <p>Warning</p> <p>Too much time</p>"},{"location":"90-developpement/02-image_disque/","title":"TODO","text":"<ul> <li> V\u00e9rifier dans le temps pour la taille du disque  </li> <li> Refaire Benchmark qcow2 VS raw (snapshots int\u00e9ressants)  </li> </ul>"},{"location":"90-developpement/02-image_disque/#etude","title":"Etude","text":""},{"location":"90-developpement/02-image_disque/#controles-dintegrite-de-limage-hdd","title":"Contr\u00f4les d'int\u00e9grit\u00e9 de l'image HDD","text":"<ul> <li> Stop : ok  </li> <li> Reboot : ok  </li> <li> Arr\u00eat brutal  </li> <li> D\u00e9sinstallation d'application  </li> <li> Lancement apr\u00e8s copie de l'image &gt;&gt; Erreur  </li> <li> Lancement durant la copie de l'image, puis lancement apr\u00e8s &gt;&gt; Erreur, impossible de relancer l'image.  </li> </ul> <p>{nbsp}</p>"},{"location":"90-developpement/02-image_disque/#compression","title":"Compression","text":"<p>Le gain de compression est ~80Mo soit dans les 10% entre le plus rapide et le plus performant, que \u00e7a soit entre winrar4 et winzip.</p> <p>La compression permet de lever tout l'espace vide; c'est suffisant.</p> <p>Ne pas utiliser <code>stockage</code>, prend l'espace r\u00e9el.</p>"},{"location":"90-developpement/03-w98/","title":"Windows 98","text":""},{"location":"90-developpement/03-w98/#windows-98-problemes","title":"Windows 98 PROBLEMES:","text":"<p>Liste des probl\u00e8mes rencontr\u00e9s avec QEMU:</p> <ul> <li>L'ACPI ralentit \u00e9norm\u00e9ment la machine virtuelle Il faut indiquer \u00e0 qemu de ne pas utiliser l'ACPI : -no-acpi</li> <li>Apr\u00e8s l'installation, il y aura dans le hardware reconnu un probl\u00e8me sur un \"bios plug n play\" il faut mettre \u00e0 jour le driver en s\u00e9lectionnant manuellement PCI.</li> </ul> <p></p>"},{"location":"90-developpement/03-w98/#materiel","title":"Materiel","text":""},{"location":"90-developpement/03-w98/#references","title":"R\u00e9f\u00e9rences","text":""},{"location":"90-developpement/03-w98/#drivers","title":"Drivers","text":"<ul> <li>Vogons</li> </ul>"},{"location":"90-developpement/03-w98/#cartes-video","title":"Cartes Video","text":""},{"location":"90-developpement/03-w98/#cirrus-logic-gd5446","title":"Cirrus Logic GD5446","text":"<p>Bugs:  </p> <ul> <li>Drivers 1.31  <ul> <li>Exe qui posent probl\u00e8me DDraw16.dll  </li> <li>Bouton en haut pour r\u00e9duire, maximiser, fermer.  </li> </ul> </li> <li>Drivers 1.4  <ul> <li>Exe qui posent probl\u00e8me DDraw16.dll  </li> </ul> </li> <li>cirmm.drv : exemple en lan\u00e7ant winrar, l'extraction am\u00e8ne une erreur.  </li> </ul> <p> </p>"},{"location":"90-developpement/03-w98/#cartes-sons","title":"Cartes sons","text":"<p>Warning</p> <p>Il y aurait des probl\u00e8mes en mode GTK Qemu et certains drivers creative labs.</p> <p></p>"},{"location":"90-developpement/03-w98/#faq","title":"FAQ","text":""},{"location":"90-developpement/03-w98/#black-screen-en-extinction-normale","title":"Black Screen en extinction normale","text":"<p>Ne semble pas impacter, juste attendre de ne plus avoir le curseur clignotant. En g\u00e9n\u00e9ral on voit un l\u00e9ger effet sur l'\u00e9cran juste avant que le curseur disparaisse.</p> <p></p>"},{"location":"90-developpement/03-w98/#black-screen-au-boot","title":"Black Screen au boot","text":"<p>A part si vous avez ajout\u00e9 un composant en plus qui bloque, cela peut arriver en rebootant Windows 98.</p> <p>Dans ce cas:</p> <ul> <li>Passez en mode sans \u00e9chec en appuyant sur F8.  </li> <li>Eteindre la machine normalement.</li> </ul> <p>Pour ralentir, appuyez sur esc au d\u00e9marrage pour avoir le boot menu</p> <p></p>"},{"location":"90-developpement/03-w98/#carte-reseau-distante","title":"Carte r\u00e9seau distante","text":"<p>A enlever</p> <p>G\u00e9n\u00e9ralement appara\u00eet avant de mettre \u00e0 jour le bug du \"bios plug n play\", cette carte ne sert \u00e0 rien et peut provoquer des probl\u00e8mes avec les cartes sons par la suite.</p> <p></p>"},{"location":"90-developpement/03-w98/#erreur-de-protection-windows","title":"Erreur de protection Windows","text":"<p>Probablement li\u00e9 au fait de red\u00e9marrer la machine par l'OS, \u00e0 \u00e9viter.</p> <p></p>"},{"location":"90-developpement/03-w98/#base-de-registre","title":"Base de registre","text":"<p>Utiilser scanreg sous dos/cmd</p> <p></p>"},{"location":"90-developpement/03-w98/#partitions","title":"Partitions","text":"<p>Utiliser FDISK sous cmd/dos</p>"},{"location":"90-developpement/Jeux/","title":"Panel de jeux","text":"Nom CPU Ann\u00e9e API OS Note Battlezone 166mhz 1998 D3D Windows Remaster ? Requiem 200mhz 2000 D3D/Glide Windows ? Jedi Knight 90mhz 1997 DirectX5 Windows Remasteris\u00e9 Deus Ex 200mhz 2000 D3D/Glide Windows ?"},{"location":"90-developpement/Jeux/#jeux-testes","title":"Jeux test\u00e9s","text":""},{"location":"90-developpement/Jeux/#jeux-2d","title":"Jeux 2D","text":"Jeu OS API DoxBox QEMU* VMWARE* VirtualBox* 86Box Wrappers Notes Command &amp; Conquer DOS DDRaw TB Non Non Non Non Non Command &amp; Conquer GOLD Win9x ??? Non Err Err EE TB Perte r\u00e9seau La version gold d\u00e9zoome pour afficher en 640x480, pose probl\u00e8me avec les pilotes JHRobotics et divers hyperviseurs de niveau 2. Starcraft Win98 DDRAW/DirectX2 Non TB TB TB TB ??? Simple \u00e0 tester"},{"location":"90-developpement/Jeux/#jeux-3d","title":"Jeux 3D","text":"Jeu OS API DoxBox QEMU3DFX VMWARE* VirtualBox* 86Box Wrappers Notes Battlezone Win98 DirectX5 - - TB - - ??? Half Life Win98 DirectX? - - TB - TB Unreal Win98 DirectX5 - - TB - TB Messiah Win98 Direct ?? Non - TB Err - Jedi Knight Win98 Direct ? Non - - TB - <p>SoftGPU Qemu n\u00e9cessite la compilation 3DFX pour acc\u00e9l\u00e9rer la 3D.</p> <p></p>"},{"location":"90-developpement/Jeux/#tests","title":"Tests","text":""},{"location":"90-developpement/Jeux/#unreal","title":"Unreal","text":"Hyper/Emu Host R\u00e9glage API R\u00e9solution Max Commentaire VirtualBox Windows 10 VMSVGA** D3D 1920x1080 Fluide VirtualBox ArchW98 VMSVGA** D3D 1024x768 Fluide 86Box Windows11 Voodoo2 x1 3DFX 800x600 Fluide VirtualBox ArchW98 VBOXVGA D3D 800x600 Fluide"},{"location":"90-developpement/Jeux/#half-life","title":"Half Life","text":"Hyper/Emu Host R\u00e9glage API R\u00e9solution Max Commentaire VirtualBox Windows 11 VMSVGA OpenGL 1600x1200 Fluide VirtualBox ArchW98 VMSVGA OpenGL 1600x1200 Fluide 86Box Windows11 Voodoo2 x1 3DFX 800x600 Fluide 86Box Windows11 Voodoo2 x2 3DFX 1024x768 Fluide"},{"location":"90-developpement/Jeux/#battlezone","title":"Battlezone","text":"Hyper/Emu Host R\u00e9glage API R\u00e9solution Max Commentaire VirtualBox ArchW98 VMSVGA** ???? 1152x864 Fluide"},{"location":"90-developpement/Jeux/#messiah","title":"Messiah","text":"Hyper/Emu Host R\u00e9glage API Son R\u00e9solution Max Commentaire VirtualBox Windows 10 VMSVGA** ???? AC97 1024x768 mettre en 3DFx VMWare Windows 10 VMWare** ???? SB 128 PCI 1600x1200 mettre en 3DFx VirtualBox ArchW98 VMSVGA** ???? AC97 1024x768 mettre en 3DFx VirtualBox ArchW98 VMSVGA** ???? SB16 1024x768 Probl\u00e8mes de son, mettre en 3DF"},{"location":"90-developpement/Jeux/#_1","title":"Panel de jeux","text":"Hyper/Emu Host R\u00e9glage API Son R\u00e9solution Max Commentaire VirtualBox ArchW98 VMSVGA** ???? AC97 1920x1080"},{"location":"90-developpement/Jeux/#mise-en-place-virtualbox-pour-softgpu","title":"Mise en place VirtualBox pour SoftGPU","text":"<p>Ces param\u00e8tres sont \u00e0 mettre autant sur Linux que sur Windows sinon l'acc\u00e9l\u00e9ration 3D ne se fera pas en passtrough</p> <ul> <li>Configuration VirtualBox</li> <li>General:<ul> <li>Type: Linux</li> <li>Version: Other Linux (32-bit)   </li> </ul> </li> <li>Display<ul> <li>Controleur Graphic VMSVGA</li> <li>M\u00e9moire: 128 Mo (Ne pas mettre moins, sinon L'acc\u00e9l\u00e9ration 3D peut se couper parfois). Plus peut amener d'autres probl\u00e8mes.</li> </ul> </li> <li>Guest:</li> <li>32 Bits pour le support de l'acc\u00e9ration 3D</li> </ul> <p></p> <p>Base memory: 512 MB (this is minimum (for vGPU10), but more 512 MB isn't recommended without additional patches!), CPU: 1 Disk size: recommended is at least 20 GB for 98/Me (you can select less, but HDD becomes full faster). Select 2 GB if you plan install Windows 95. Tip: If you storing virtual machine on classic HDD, check Pre-allocate Full Size, because it leads to lower disk image fragmentation. Finish wizard Open VM setting</p> <p>Check enable 3D Acceleration Optional adjustment set USB controller to USB 1.1 (OHCI) for 98/Me, or turn USB off for 95 Audio controller set to SoundBlaster 16 for 95 and 98 or AC 97 for 98 and Me (working drivers for Windows 98 are below). Install system - Windows 98 SE is highly recommended (for newer CPU, you need my patch: https://github.com/JHRobotics/patcher9x) Optional increase memory - especially vGPU10 driver is relative heavy about RAM usage. Apply PATCHMEM by rloew, after it you can increase base RAM (768 MB or 1024 MB should be enough) Insert SoftGPU iso (can be downloaded in Releases) and run softgpu.exe VirtualBox 7.0.16 and higher: Uncheck DX flags option:</p> <p></p>"},{"location":"90-developpement/Jeux/#wrappers","title":"Wrappers","text":"<p>NGlide</p>"},{"location":"90-developpement/Jeux/#severance","title":"Severance","text":"<p>Fonctionnel avec NGlide</p>"},{"location":"90-developpement/Qemu3dFx/","title":"Qemu3dFx","text":""},{"location":"90-developpement/Qemu3dFx/#preparation","title":"Pr\u00e9paration","text":"<p>R\u00e9alis\u00e9</p> <ul> <li> <p>Installation de Git, wget, rsync, patch <pre><code>sudo pacman -S git wget rsync patch\n</code></pre></p> </li> <li> <p>Installation du builder Ninja <pre><code>sudo pacman -S ninja\n</code></pre></p> </li> </ul> <p>Souci</p> <ul> <li>Installation du g\u00e9n\u00e9rateur de documentation Sphinx</li> </ul> <pre><code>sudo pacman -S python-sphinx python-sphinx_rtd_theme\n</code></pre> <p>Souci</p> <ul> <li>Installation d'un compilateur C <pre><code>sudo pacman -S gcc\n</code></pre></li> <li>Installation (sur et vital) pkg-config <pre><code>sudo pacman -S pkgconf\n</code></pre></li> <li>Installation (probable) bisons, flex, meson, <pre><code>sudo pacman -S flex bison meson\n</code></pre></li> </ul> <p></p> <p>!!! A voir : sndio(midi), iasl(d\u00e9compileur?), cgcc, appleframeworks, rutabaga_gfx_ffi, blkio, rados, librbd.h,lzfse.h,rdma_cma.h, ibverbs, xencontrol, xenstore, xenctrl, xendevicemodel, xenforeigmemeory...., u2f-emu, canokey-qemu, libpmem, libselinux, valgrind.h, sys/disk.h, sys/ioccom.h, sys/kcov.h, _aligned_malloc, sched_getcpu, pthread_fchdir_np, optreset, sigev_notify_thread_id,  indent, gvnc-1.0, sphinx-build, </p> <p></p>"},{"location":"90-developpement/Qemu3dFx/#compilation","title":"Compilation","text":"<ul> <li>Cr\u00e9ation d'un dossier pour cloner le d\u00e9p\u00f4t <pre><code>mkdir qemu3dfx_compil &amp;&amp; cd qemu3dfx_compil\n</code></pre></li> <li>Clone du d\u00e9p\u00f4t <pre><code>git clone https://github.com/kjliew/qemu-3dfx.git\n</code></pre></li> <li>On entre dans le d\u00e9p\u00f4t <pre><code>cd qemu-3dfx\n</code></pre></li> <li>T\u00e9l\u00e9chargement des sources de qemu 8.2.1 <pre><code>wget https://download.qemu.org/qemu-8.2.1.tar.xz\n</code></pre></li> <li>Extraction des sources <pre><code>tar xf qemu-8.2.1.tar.xz\n</code></pre></li> <li>Synchronisation de <code>../qemu-0/hw/3dfx</code> &amp; <code>../qemu-1/hw/mesa</code> vers <code>./hw/</code> (Attention de ne pas laisser un <code>/</code> \u00e0 la fin des sources) <pre><code>cd qemu-8.2.1\nrsync -r ../qemu-0/hw/3dfx ../qemu-1/hw/mesa ./hw/\n</code></pre> - <pre><code>patch -p0 -i ../00-qemu82x-mesa-glide.patch\n</code></pre> - <pre><code>$ bash ../scripts/sign_commit\n</code></pre></li> <li>Compilation <pre><code>mkdir ../build &amp;&amp; cd ../build\n../qemu-8.2.1/configure &amp;&amp; make\n</code></pre></li> </ul>"},{"location":"90-developpement/Qemu3dFx/#debug","title":"Debug","text":"<p><code>ERROR: Unrecognized host OS (uname -s reports 'Linux')</code> : Absence de compilateur C</p>"}]}